(this.webpackJsonpbolphaia=this.webpackJsonpbolphaia||[]).push([[0],[,,,,,,,function(e,t,a){},,,,function(e,t,a){e.exports=a.p+"static/media/whitePawn.d69014fb.svg"},function(e,t,a){e.exports=a.p+"static/media/blackPawn.1c52d8c4.svg"},function(e,t,a){e.exports=a.p+"static/media/whiteCataphract.e6294efe.svg"},function(e,t,a){e.exports=a.p+"static/media/blackCataphract.d39f1d02.svg"},function(e,t,a){e.exports=a.p+"static/media/whiteArcher.9cbde199.svg"},function(e,t,a){e.exports=a.p+"static/media/blackArcher.ae09d6fb.svg"},function(e,t,a){e.exports=a(24)},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),s=a.n(i);a(7),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,c=a(10),h=a(1),l=a(4),u=a(3),g=a(2),p=a(5),v=a(6);function y(e){return n.createElement("span",{className:"health-box"},n.createElement("span",{className:"remaining-health",style:{height:f(e.maxHealth,e.remainingHealth)}}))}function f(e,t){return"".concat(t/e*29,"px")}!function(e){e.phrygians="phrygians",e.hitites="hitites"}(o||(o={}));var d=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.state={hoverIcon:""},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return n.createElement("button",{className:"square ".concat(this.props.cssClasses.join(" ")," ").concat(this.state.hoverIcon),onClick:this.onClick.bind(this),onMouseEnter:this.setHoverIconFromGameCallback.bind(this),onMouseLeave:this.resetHoverIcon.bind(this),style:{backgroundImage:"url(".concat(this.props.piece&&this.props.piece.getImageUrl(),")")||!1}},this.props.piece?n.createElement(y,{maxHealth:this.props.piece.maxHealth,remainingHealth:this.props.piece.health}):"")}},{key:"onClick",value:function(){return this.props.onMoveClick(),this.setHoverIconFromGameCallback()}},{key:"resetHoverIcon",value:function(){return this.setState({hoverIcon:""})}},{key:"setHoverIconFromGameCallback",value:function(){var e=this;return this.setState((function(t){return{hoverIcon:e.props.getHoverIcon()}}))}}]),t}(n.Component),b=function(e){function t(){return Object(h.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){for(var e=[],t=this.props.boardState.length,a=this.props.boardState[0].length,r=0;r<t;r++){for(var i=[],s=0;s<a;s++){var o=[];o.push(m(r)&&m(s)||!m(r)&&!m(s)?"light-square":"dark-square");var c=this.props.boardState[r][s],h=this.props.highlightState.length&&this.props.highlightState[r][s];h&&h.canMove&&o.push(!0===h.canAttack?"highlighted-square-red":"highlighted-square-green"),h&&h.inAttackRange&&o.push("highlighted-square-in-ranged-attack"),i.push(this.renderSquare(r,s,o,c))}e.push(n.createElement("div",{key:r,className:"board-row"},i))}return n.createElement("div",null,e)}},{key:"renderSquare",value:function(e,t,a,r){var i=this;return n.createElement(d,{key:8*e+t,cssClasses:a,piece:r,onMoveClick:function(){return i.props.onMoveClick({x:e,y:t})},getHoverIcon:function(){return i.props.getHoverIcon({x:e,y:t})}})}}]),t}(n.Component);function m(e){return e%2===0}var k=function(){function e(t){Object(h.a)(this,e),this.player=void 0,this.isSelected=!1,this.health=0,this.maxHealth=void 0,this.attack=0,this.moveRange=0,this.player=t}return Object(g.a)(e,[{key:"takeDamage",value:function(e){return this.health=this.health-e,this.health}}]),e}(),x=a(11),O=a.n(x),j=a(12),S=a.n(j),w=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).moveRange=2,a.health=2,a.maxHealth=2,a.attack=1,a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"getImageUrl",value:function(){return this.player===o.phrygians?O.a:S.a}}]),t}(k),H=a(13),I=a.n(H),M=a(14),E=a.n(M),q=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).moveRange=5,a.health=10,a.maxHealth=10,a.attack=5,a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"getImageUrl",value:function(){return this.player===o.phrygians?I.a:E.a}}]),t}(k);function A(e,t,a){if(t.x<0||e.x<0||t.y<0||e.y<0)return[];var n=t.x-e.x,r=t.y-e.y,i=n<0,s=r<0,o=0,c=0,h=[e],l=a[e.x][e.y];if(!l)return[];for(;0!==n||0!==r;){0!==n&&(o+=i?-1:1,n+=i?1:-1),0!==r&&(c+=s?-1:1,r+=s?1:-1);var u=a[e.x+o][e.y+c],g={x:e.x+o,y:e.y+c};if(null!==u){l.player!==u.player&&h.push(g);break}if(h.push(g),(0===g.x||g.x===U-1)&&0!==r||(0===g.y||g.y===B-1)&&0!==n)break}return h}var C=a(15),P=a.n(C),R=a(16),D=a.n(R),N=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).moveRange=2,a.health=2,a.maxHealth=2,a.attack=1,a.range=4,a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"getImageUrl",value:function(){return this.player===o.phrygians?P.a:D.a}}]),t}(function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).range=0,a}return Object(p.a)(t,e),t}(k));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=24,U=16,F=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.state={turn:o.phrygians,selectedSquare:null,boardState:a.initializeBoard(U,B),highlightState:a.generateEmptyHighlightedMoves(),mouseHoverIcon:""},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement("div",null,this.state.turn),n.createElement(b,{boardState:this.state.boardState,highlightState:this.state.highlightState,onMoveClick:this.onMoveClick.bind(this),getHoverIcon:this.getHoverIcon.bind(this)}))}}]),Object(g.a)(t,[{key:"initializeBoard",value:function(e,t){for(var a=[],n=0;n<e;n++){var r=null;if(0!==n){if(1===n)r=new w(o.phrygians);else if(6===n)r=new w(o.hitites);else if(7===n){var i=new Array(t).fill(null);i[1]=new q(o.hitites),i[3]=new N(o.hitites),i[6]=new q(o.hitites),a.push(i);continue}a.push(new Array(t).fill(r))}else{var s=new Array(t).fill(null);s[1]=new q(o.phrygians),s[3]=new N(o.phrygians),s[6]=new q(o.phrygians),a.push(s)}}return a}},{key:"getSelectedPiece",value:function(){return this.state.selectedSquare&&this.state.boardState[this.state.selectedSquare.x][this.state.selectedSquare.y]}},{key:"generateEmptyHighlightedMoves",value:function(){for(var e=[],t=0;t<U;t++){for(var a=[],n=0;n<B;n++){a.push({canMove:!1,canAttack:!1,inAttackRange:!1})}e.push(a)}return e}},{key:"onMoveClick",value:function(e){var t=this.state.selectedSquare,a=this.state.boardState[e.x][e.y],n=this.getSelectedPiece();if(n||a){if(!n&&null!=a){if(a.player!==this.state.turn)return;return this.setState({selectedSquare:V({},e),highlightState:this.generatePossibleMovesHighlights(e,a)})}if(this.isTargetValidRangedAttack(e,n)&&n&&a){var r=Object(v.cloneDeep)(this.state.boardState);return a.takeDamage(n.attack),a.health<=0?r[e.x][e.y]=null:r[e.x][e.y]=a,this.setState({boardState:r,selectedSquare:null,highlightState:this.generateEmptyHighlightedMoves(),turn:this.getNewTurn()})}var i=this.state.highlightState[e.x][e.y].canMove;if(n&&t&&i){var s=Object(v.cloneDeep)(this.state.boardState);if(a&&a!==n)if(a.takeDamage(n.attack),a.health<=0)s[t.x][t.y]=null,s[e.x][e.y]=n;else{var o=A(t,e,this.state.boardState),c=Object(v.findIndex)(o,(function(t){return t.x===e.x&&t.y===e.y}))-1;c<0&&console.error("something went wrong.. should not happen.. crash imminent");var h=o[c];s[t.x][t.y]=null,s[h.x][h.y]=n,s[e.x][e.y]=a}else s[t.x][t.y]=null,s[e.x][e.y]=n;return this.setState({boardState:s,selectedSquare:null,highlightState:this.generateEmptyHighlightedMoves(),turn:this.getNewTurn()})}return n&&!i?this.setState({selectedSquare:null,highlightState:this.generateEmptyHighlightedMoves()}):void 0}}},{key:"getNewTurn",value:function(){return this.state.turn===o.phrygians?o.hitites:o.phrygians}},{key:"getHoverIcon",value:function(e){var t=this.getSelectedPiece(),a=Object(v.get)(this,"state.boardState[".concat(e.x,"][").concat(e.y,"]"),null);if(!t&&a&&a.player===this.state.turn)return"pointer-icon";if(!t)return"";var n=this.state.highlightState[e.x][e.y];return this.isTargetValidRangedAttack(e,t)?"bow-icon":n.canAttack?"sword-icon":n.canMove?"boots-icon":""}},{key:"generatePossibleMovesHighlights",value:function(e,t){var a=this.generateEmptyHighlightedMoves();if(!t)return a;for(var n=[-t.moveRange,0,t.moveRange],r=0;r<3;r++)for(var i=0;i<3;i++){var s=A(e,{x:this.getValidIndex(e.x+n[r],U-1),y:this.getValidIndex(e.y+n[i],B-1)},this.state.boardState),o=!0,c=!1,h=void 0;try{for(var l,u=s[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var g=l.value;a[g.x][g.y].canMove=!0,this.squareHasEnemyPiece(g,t)&&(a[g.x][g.y].canAttack=!0)}}catch(f){c=!0,h=f}finally{try{o||null==u.return||u.return()}finally{if(c)throw h}}}if(t.range)for(var p=t.range,v=Math.max(e.x-p,0);v<=Math.min(e.x+p,U);v++)for(var y=Math.max(e.y-p,0);y<=Math.min(e.y+p,B);y++)a[v][y].inAttackRange=!0;return a}},{key:"getValidIndex",value:function(e,t){return e>t?t:e<0?0:e}},{key:"isTargetValidRangedAttack",value:function(e,t){return!!t.range&&this.state.highlightState[e.x][e.y].inAttackRange&&this.squareHasEnemyPiece(e,t)}},{key:"squareHasEnemyPiece",value:function(e,t){return Object(v.get)(this,"state.boardState[".concat(e.x,"][").concat(e.y,"].player"),t.player)!==t.player}}]),t}(n.Component);s.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[17,1,2]]]);
//# sourceMappingURL=main.290c48d5.chunk.js.map